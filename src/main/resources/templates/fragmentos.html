
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:fragment="head(title)">
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title th:text="${title}">NEXO</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
        <link rel="stylesheet" th:href="@{/css/nexo.css}" />
            <style>
            .nexo-logo { height:64px; max-height:64px; }
            @media (max-width:576px) { .nexo-logo { height:48px; max-height:48px; } }
            /* keep header spacing but use colors from nexo.css */
            .header-title { margin-left:0.75rem; font-weight:700; font-size:1.05rem; color:var(--nexo-dark); }
            header.nexo-header { padding:12px 0; box-shadow: 0 1px 0 rgba(0,0,0,0.04); }
            .header-logout-btn { font-size:1.2rem; color:var(--nexo-blue); border:0; background:transparent; display:inline-flex; align-items:center; gap:0.5rem; }
            .header-logout-btn:hover { color:var(--nexo-accent); text-decoration:none; }
            @media(min-width:768px){ .header-title{ color: #fff } .header-logout-btn{ color: #fff } }
        </style>
    </th:block>
</head>
<body>
    <div th:fragment="header(title)">
        <header class="nexo-header">
            <div class="container d-flex align-items-center gap-3">
                <a th:href="@{/}" class="d-flex align-items-center">
                    <img th:src="@{/images/NEXO.png}" alt="NEXO" class="nexo-logo" onerror="this.style.display='none'" />
                </a>
                <h1 class="header-title mb-0" th:text="${title}"></h1>
                <div class="ms-auto d-flex align-items-center gap-2">
                    <form th:action="@{/logout}" method="post"
                          th:if="${T(org.springframework.security.core.context.SecurityContextHolder).getContext().getAuthentication() != null and T(org.springframework.security.core.context.SecurityContextHolder).getContext().getAuthentication().principal != 'anonymousUser'}">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                        <button type="submit" class="header-logout-btn" title="Sair" aria-label="Sair">
                            <i class="bi bi-box-arrow-right" aria-hidden="true"></i>
                            <span class="visually-hidden">Sair</span>
                        </button>
                    </form>
                    <div>
                        <a href="#" class="btn btn-link p-0">PT</a>
                    </div>
                </div>
            </div>
        </header>
    </div>
</body>
</html>
